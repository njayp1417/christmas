{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchWithAuth = exports.resolveHeadersConstructor = exports.resolveFetch = void 0;\nconst resolveFetch = customFetch => {\n  if (customFetch) {\n    return (...args) => customFetch(...args);\n  }\n  return (...args) => fetch(...args);\n};\nexports.resolveFetch = resolveFetch;\nconst resolveHeadersConstructor = () => {\n  return Headers;\n};\nexports.resolveHeadersConstructor = resolveHeadersConstructor;\nconst fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n  const fetch = (0, exports.resolveFetch)(customFetch);\n  const HeadersConstructor = (0, exports.resolveHeadersConstructor)();\n  return async (input, init) => {\n    var _a;\n    const accessToken = (_a = await getAccessToken()) !== null && _a !== void 0 ? _a : supabaseKey;\n    let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n    if (!headers.has('apikey')) {\n      headers.set('apikey', supabaseKey);\n    }\n    if (!headers.has('Authorization')) {\n      headers.set('Authorization', `Bearer ${accessToken}`);\n    }\n    return fetch(input, Object.assign(Object.assign({}, init), {\n      headers\n    }));\n  };\n};\nexports.fetchWithAuth = fetchWithAuth;","map":{"version":3,"names":["resolveFetch","customFetch","args","fetch","exports","resolveHeadersConstructor","Headers","fetchWithAuth","supabaseKey","getAccessToken","HeadersConstructor","input","init","accessToken","_a","headers","has","set","Object","assign"],"sources":["c:\\Users\\PC\\OneDrive\\Desktop\\christmas\\node_modules\\@supabase\\supabase-js\\src\\lib\\fetch.ts"],"sourcesContent":["type Fetch = typeof fetch\n\nexport const resolveFetch = (customFetch?: Fetch): Fetch => {\n  if (customFetch) {\n    return (...args: Parameters<Fetch>) => customFetch(...args)\n  }\n  return (...args: Parameters<Fetch>) => fetch(...args)\n}\n\nexport const resolveHeadersConstructor = () => {\n  return Headers\n}\n\nexport const fetchWithAuth = (\n  supabaseKey: string,\n  getAccessToken: () => Promise<string | null>,\n  customFetch?: Fetch\n): Fetch => {\n  const fetch = resolveFetch(customFetch)\n  const HeadersConstructor = resolveHeadersConstructor()\n\n  return async (input, init) => {\n    const accessToken = (await getAccessToken()) ?? supabaseKey\n    let headers = new HeadersConstructor(init?.headers)\n\n    if (!headers.has('apikey')) {\n      headers.set('apikey', supabaseKey)\n    }\n\n    if (!headers.has('Authorization')) {\n      headers.set('Authorization', `Bearer ${accessToken}`)\n    }\n\n    return fetch(input, { ...init, headers })\n  }\n}\n"],"mappings":";;;;;;AAEO,MAAMA,YAAY,GAAIC,WAAmB,IAAW;EACzD,IAAIA,WAAW,EAAE;IACf,OAAO,CAAC,GAAGC,IAAuB,KAAKD,WAAW,CAAC,GAAGC,IAAI,CAAC;EAC7D;EACA,OAAO,CAAC,GAAGA,IAAuB,KAAKC,KAAK,CAAC,GAAGD,IAAI,CAAC;AACvD,CAAC;AALYE,OAAA,CAAAJ,YAAY,GAAAA,YAAA;AAOlB,MAAMK,yBAAyB,GAAGA,CAAA,KAAK;EAC5C,OAAOC,OAAO;AAChB,CAAC;AAFYF,OAAA,CAAAC,yBAAyB,GAAAA,yBAAA;AAI/B,MAAME,aAAa,GAAGA,CAC3BC,WAAmB,EACnBC,cAA4C,EAC5CR,WAAmB,KACV;EACT,MAAME,KAAK,GAAG,IAAAC,OAAA,CAAAJ,YAAY,EAACC,WAAW,CAAC;EACvC,MAAMS,kBAAkB,GAAG,IAAAN,OAAA,CAAAC,yBAAyB,GAAE;EAEtD,OAAO,OAAOM,KAAK,EAAEC,IAAI,KAAI;;IAC3B,MAAMC,WAAW,GAAG,CAAAC,EAAA,GAAC,MAAML,cAAc,EAAG,cAAAK,EAAA,cAAAA,EAAA,GAAIN,WAAW;IAC3D,IAAIO,OAAO,GAAG,IAAIL,kBAAkB,CAACE,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,OAAO,CAAC;IAEnD,IAAI,CAACA,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,EAAE;MAC1BD,OAAO,CAACE,GAAG,CAAC,QAAQ,EAAET,WAAW,CAAC;IACpC;IAEA,IAAI,CAACO,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,EAAE;MACjCD,OAAO,CAACE,GAAG,CAAC,eAAe,EAAE,UAAUJ,WAAW,EAAE,CAAC;IACvD;IAEA,OAAOV,KAAK,CAACQ,KAAK,EAAAO,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAOP,IAAI;MAAEG;IAAO,GAAG;EAC3C,CAAC;AACH,CAAC;AAtBYX,OAAA,CAAAG,aAAa,GAAAA,aAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}